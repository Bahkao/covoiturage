{% extends "base_location.html" %}
{% block title%}Mes demandes{% endblock %}
{% block extra_script%}
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <script src="http://maps.google.com/maps?file=api&v=2.x&key=ABQIAAAAgBspmYKlV-K16v3uuTvAVxRi_j0U6kJrkFvY4-OX2XYmEAa76BSgsjX0y8bYKQLn4ZrAjLWukCYdBw"
      type="text/javascript"></script>
    <script type="text/javascript"> 
	// Create a directions object and register a map and DIV to hold the 
    // resulting computed directions
    function addAddressAsStart(){
        mySelect = $("startSelect");
        startValue = mySelect.options[mySelect.selectedIndex].value
        if(startValue == "none"){
            $("id_start_house_number").value = "";
            $("id_start_street").value = "";
            $("id_start_city_name").value = "";
            $("id_start_zip_code").value= "";
        }{% for address in user.address_set.all %}else if (startValue == "{{forloop.counter0}}"){
            $("id_start_house_number").value = "{{address.location.house_number}}";
            $("id_start_street").value = "{{address.location.street}}";
            $("id_start_city_name").value = "{{address.location.city_name}}";
            $("id_start_zip_code").value= "{{address.location.zip_code}}";
        }{% endfor %}
    }
    </script>
{% endblock %}

{% block content %}
    <input type="submit" onclick="addAddressAsStart()" value="Utiliser votre adresse comme addresse de dÃ©part">
    <div id="map_canvas" style="width: 0px; height: 0px;"></div>
    <form action="." method="POST" >
        <select id="startSelect" onchange="addAddressAsStart()">
          <option value="none">-</option>
          {% for address in user.address_set.all %}
          <option value="{{forloop.counter0}}">{{address}}</option>
          {% endfor %}
        </select>
        <table>
            {{form.as_table}}
        </table>
        <p>
            <input type="submit" value="Submit" id="id_button"/>
            <a href="/location/passenger/">Annuler</a>
        </p>
    </form>
{% endblock %}